---
title: 关于此博客模板的一些简单改动
date: 2020-05-24
tags:
 - 博客
categories:
 - 博客
---

本博客使用的是基于Vuepress的主题[vuepress-theme-reco](https://vuepress-theme-reco.recoluan.com/)。



基本使用，可以参考主题的官网介绍。如果希望更改更多作者没有提供配置的部分，可以阅读源代码并进行相应的更改。



下面是改动的几个例子，其他的改动也都是一样，直接修改vue代码即可。<br>主题的代码在folder：`/node_modules/vuepress-theme-reco/` 中



## 去除主页中的背景图片	

在“`/node_modules/vuepress-theme-reco/components/HomeBlog.vue`”中注释掉关于背景图的代码：

``` vue
<template>
  <div class="home-blog">
    <!-- <div class="hero" :style="{ ...bgImageStyle }">
      <div
        class="mask"
        :style="{
      background: `url(${$frontmatter.bgImage ? $withBase($frontmatter.bgImage) : require('../images/home-bg.jpg')}) center/cover no-repeat`}"></div>
      <ModuleTransition>
        <img
          v-if="recoShowModule && $frontmatter.heroImage"
          :style="heroImageStyle || {}"
          :src="$withBase($frontmatter.heroImage)"
          alt="hero">
      </ModuleTransition>
      <ModuleTransition delay="0.04">
        <h1 v-if="recoShowModule && $frontmatter.heroText !== null">
          {{ $frontmatter.heroText || $title || 'vuePress-theme-reco' }}
        </h1>
      </ModuleTransition>

      <ModuleTransition delay="0.08">
        <p v-if="recoShowModule && $frontmatter.tagline !== null" class="description">
          {{ $frontmatter.tagline || $description || 'Welcome to your vuePress-theme-reco site' }}
        </p>
      </ModuleTransition>
    </div> -->

    <ModuleTransition delay="0.16">
      <div v-show="recoShowModule" class="home-blog-wrapper">
        <div class="blog-list">
          <!-- 博客列表 -->
          <note-abstract
            :data="$recoPosts"
            :currentPage="currentPage"></note-abstract>
          <!-- 分页 -->
          <pagation
            class="pagation"
            :total="$recoPosts.length"
            :currentPage="currentPage"
            @getCurrentPage="getCurrentPage" />
        </div>
        <div class="info-wrapper">
          <PersonalInfo/>
          <h4><i class="iconfont reco-category"></i> {{homeBlogCfg.category}}</h4>
          <ul class="category-wrapper">
            <li class="category-item" v-for="(item, index) in this.$categories.list" :key="index">
              <router-link :to="item.path">
                <span class="category-name">{{ item.name }}</span>
                <span class="post-num" :style="{ 'backgroundColor': getOneColor() }">{{ item.pages.length }}</span>
              </router-link>
            </li>
          </ul>
          <hr>
          <h4 v-if="$tags.list.length !== 0"><i class="iconfont reco-tag"></i> {{homeBlogCfg.tag}}</h4>
          <TagList @getCurrentTag="getPagesByTags" />
          <h4 v-if="$themeConfig.friendLink && $themeConfig.friendLink.length !== 0"><i class="iconfont reco-friend"></i> {{homeBlogCfg.friendLink}}</h4>
          <FriendLink />
        </div>
      </div>
    </ModuleTransition>

    <ModuleTransition delay="0.24">
      <Content v-show="recoShowModule" class="home-center" custom/>
    </ModuleTransition>
  </div>
</template>
```



## 去除页脚的官网链接

同样在`components`目录下，修改对应vue文件`Footer.vue`，注释掉对应代码

``` vue
        <!-- <span>
          <i class="iconfont reco-theme"></i>
          <a target="blank" href="https://vuepress-theme-reco.recoluan.com">vuePress-theme-reco</a>
        </span> -->
```



## 修改页面宽度

跟之前vuepress一样，在`.vuepress\styles\palette.styl`添加config信息`$contentWidth = 80%`可以使文章的主题部分宽度变为80%，但我们发现文章的标题没有跟着变化。F12查看，发现文章的标题的`width`是固定`740px`。所以搜索整个工程，找到了如下几个地方固定了宽度，做相应的修改就可以了

*这里我修改了上面四个的样式`max-width: 80%`*

```css
Searching 71 files for "740px"

/Users/heyan/self/workspace/vuepress_workspace/other-blog/node_modules/vuepress-theme-reco/components/Page.vue:
  230    display block
  231    .page-title
  232:     max-width: 740px;
  233      margin: 0 auto;
  234      padding: 1rem 2.5rem;

/Users/heyan/self/workspace/vuepress_workspace/other-blog/node_modules/vuepress-theme-reco/layouts/Category.vue:
  109  @require '../styles/mode.styl'
  110  .categories-wrapper
  111:   max-width: 740px;
  112    margin: 0 auto;
  113    padding: 4.6rem 2.5rem 0;

/Users/heyan/self/workspace/vuepress_workspace/other-blog/node_modules/vuepress-theme-reco/layouts/Tag.vue:
  102  @require '../styles/mode.styl'
  103  .tag-wrapper
  104:   max-width: 740px;
  105    margin: 0 auto;
  106    padding: 4.6rem 2.5rem 0;

/Users/heyan/self/workspace/vuepress_workspace/other-blog/node_modules/vuepress-theme-reco/layouts/Tags.vue:
   91  <style lang="stylus" scoped>
   92  .tags-wrapper
   93:   max-width: 740px;
   94    margin: 0 auto;
   95    padding: 4.6rem 2.5rem 0;

/Users/heyan/self/workspace/vuepress_workspace/other-blog/node_modules/vuepress-theme-reco/layouts/TimeLines.vue:
   59  
   60  .timeline-wrapper
   61:   max-width: 740px;
   62    margin: 0 auto;
   63    padding: 4.6rem 2.5rem 0;

5 matches across 5 files
```



## PageInfo 跳转问题修复

在每篇文章的tag上，如果直接点击这个tag，页面会报404错误。具体发现它的跳转path是：

``` vue
  methods: {
    goTags (tag) {
      this.$router.push({ path: `/tags/${tag}/` })
    }
  }
```

按理说，点击单个tag，应该是跳转到/tag/xxx上。比对标题栏上的tag跳转，也确实是/tag/xxx能正常工作，所以我们直接在这里（PageInfo.vue）把这个代码改成

``` vue {3}
  methods: {
    goTags (tag) {
      this.$router.push({ path: `/tag/${tag}/` })
    }
  }
```

